<!DOCTYPE html>
<html>
	<head>
		<title>jQuery lightbox clone - prettyPhoto - by Stephane Caron</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
		<!--script src="js/jquery.lint.js" type="text/javascript" charset="utf-8"></script-->
		<link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
		<script src="js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery-mousewheel.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/interact.min.js" type="text/javascript" charset="utf-8"></script>
		
		<style type="text/css" media="screen">
			* { margin: 0; padding: 0; }
			
			body {
				background: #282828;
				font: 62.5%/1.2 Arial, Verdana, Sans-Serif;
				padding: 0 20px;
			}
			
			h1 { font-family: Georgia; font-style: italic; margin-bottom: 10px; }
			
			h2 {
				font-family: Georgia;
				font-style: italic;
				margin: 25px 0 5px 0;
			}
			
			p { font-size: 1.2em; }
			
			ul li { display: inline; }
			
			.wide {
				border-bottom: 1px #000 solid;
				width: 4000px;
			}
			
			.fleft { float: left; margin: 0 20px 0 0; }
			
			.cboth { clear: both; }
			
			#main {
				background: #fff;
				margin: 0 auto;
				padding: 30px;
				width: 1000px;
			}
		</style>
	</head>
	<body>
		<div id="main">
			<h1>prettyPhoto</h1>
			
			<p>This page has been made for testing purpose only. It covers all the basic things you can handle in prettyPhoto.</p>
	
			<p>For complete documentation, please refer to the official website: <a href="http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/">http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/</a></p>
	
			<!-- <h2>Gallery</h2>
			<ul class="gallery clearfix">
				<li><a href="images/fullscreen/1.JPG?lol=lol" rel="prettyPhoto[gallery1]" title="You can add caption to pictures. You can add caption to pictures. You can add caption to pictures."><img src="images/thumbnails/t_1.jpg" width="60" height="60" alt="Red round shape" /></a></li>
				<li><a href="images/fullscreen/2.jpg" rel="prettyPhoto[gallery1]"><img src="images/thumbnails/t_2.jpg" width="60" height="60" alt="Nice building" /></a></li>
				<li><a href="images/fullscreen/3.jpg" rel="prettyPhoto[gallery1]"><img src="images/thumbnails/t_3.jpg" width="60" height="60" alt="Fire!" /></a></li>
				<li><a href="images/fullscreen/4.jpg" rel="prettyPhoto[gallery1]"><img src="images/thumbnails/t_4.jpg" width="60" height="60" alt="Rock climbing" /></a></li>
				<li><a href="images/fullscreen/5.jpg" rel="prettyPhoto[gallery1]"><img src="images/thumbnails/t_5.jpg" width="60" height="60" alt="Fly kite, fly!" /></a></li>
				<li><a href="images/fullscreen/6.jpg" rel="prettyPhoto[gallery1]"><img src="images/thumbnails/t_2.jpg" width="60" height="60" alt="Nice building" /></a></li>
			</ul> -->

			<h2>Gallery</h2>
			<ul class="gallery clearfix">
				<li><a href="images/fullscreen/3.jpg" rel="prettyPhoto[gallery2]" title="How is the description on that one? How is the description on that one? How is the description on that one? "><img src="images/thumbnails/t_3.jpg" width="60" height="60" alt="This is a pretty long title" /></a></li>
				<li><a href="images/fullscreen/4.jpg" rel="prettyPhoto[gallery2]" title="Description on a single line."><img src="images/thumbnails/t_4.jpg" width="60" height="60" alt="" /></a></li>
				<li><a href="images/fullscreen/5.jpg" rel="prettyPhoto[gallery2]"><img src="images/thumbnails/t_5.jpg" width="60" height="60" alt="" /></a></li>
				<li><a href="images/fullscreen/1.jpg" rel="prettyPhoto[gallery2]"><img src="images/thumbnails/t_1.jpg" width="60" height="60" alt="" /></a></li>
				<li><a href="images/fullscreen/2.jpg" rel="prettyPhoto[gallery2]"><img src="images/thumbnails/t_2.jpg" width="60" height="60" alt="" /></a></li>
			</ul>

			
			
	
			<h2>Unusual sizes</h2>
			<ul class="gallery clearfix">
				<li><a href="images/fullscreen/wide.gif" rel="prettyPhoto[unusual]">Wide image (3000 x 1500)</a></li>
				<li><a href="images/fullscreen/high.gif" rel="prettyPhoto[unusual]">High image (1500 x 3000)</a></li>
				<li><a href="images/fullscreen/huge.gif" rel="prettyPhoto[unusual]">Huge image (3000 x 3000)</a></li>
			</ul>
	
			<br /><br />
			
			
	
			<script type="text/javascript" charset="utf-8">
			$(document).ready(function(){
				$("area[rel^='prettyPhoto']").prettyPhoto();
				
				$(".gallery:first a[rel^='prettyPhoto']").prettyPhoto({animation_speed:'normal',theme:'light_square',slideshow:3000, autoplay_slideshow: false,
						changepicturecallback: function(){zoom(); drag();} /* Called everytime an item is shown/changed */
						}
					);
				$(".gallery:gt(0) a[rel^='prettyPhoto']").prettyPhoto({animation_speed:'fast',slideshow:10000, hideflash: true});
		
				$("#custom_content a[rel^='prettyPhoto']:first").prettyPhoto({
					custom_markup: '<div id="map_canvas" style="width:260px; height:265px"></div>',
					changepicturecallback: function(){ initialize(); }
				});

				$("#custom_content a[rel^='prettyPhoto']:last").prettyPhoto({
					custom_markup: '<div id="bsap_1259344" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6"></div><div id="bsap_1237859" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6" style="height:260px"></div><div id="bsap_1251710" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6"></div>',
					changepicturecallback: function(){ _bsap.exec(); }
				});
			});
			</script>
	

	
		
	</div>
	<script type="text/javascript">
	var scale = 1;  // scale of the image
    var xLast = 0;  // last x location on the screen
    var yLast = 0;  // last y location on the screen
    var xImage = 0; // last x location on the image
    var yImage = 0; // last y location on the image
    var xt = 0;
    var yt = 0;
    var tempx = 0;
	var tempy = 0;
	

		function drag(){

			interact('#fullResImage')
			  .draggable({
			    // enable inertial throwing
			    inertia: false,
			    // keep the element within the area of it's parent
			    restrict: {
			      endOnly: false,
			      
			    },

			    // call this function on every dragmove event
			    onmove: function (event) {
			      var target = event.target,
			          // keep the dragged position in the data-x/data-y attributes
			          x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
			          y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

			      var currWidth = parseFloat(target.style.width)*scale;
			      var currHeight = parseFloat(target.style.height)*scale;
			      var halfcw = currWidth/2.0;
			      var halfch = currHeight/2.0;
			      var leftLimitx = ((halfcw-(parseFloat(target.style.width)/2.0))/scale);
			      var rightLimitx =(((currWidth-parseFloat(target.style.width))/scale)-leftLimitx);
			      var leftLimity = ((halfch-(parseFloat(target.style.height)/2.0))/scale);
			      var rightLimity =(((currHeight-parseFloat(target.style.height))/scale)-leftLimity);
			      
			      x = (x>leftLimitx)? 
			      			leftLimitx : 
			      				(-x< rightLimitx)?  x 
			      					: -rightLimitx;
			      
			      y = (y>leftLimity)? 
			      			leftLimity : 
			      				(-y< rightLimity)?  y 
			      					: -rightLimity;

			      // translate the element
			      target.style.webkitTransform =
			      target.style.transform =
			        'scale(' + scale + ')' + 'translate(' + x + 'px, ' + y + 'px)';
			      // update the posiion attributes
			      target.setAttribute('data-x', x);
			      target.setAttribute('data-y', y);
			    },
			    // call this function on every dragend event
			    onend: function (event) {
			      var textEl = event.target.querySelector('p');

			      textEl && (textEl.textContent =
			        'moved a distance of '
			        + (Math.sqrt(event.dx * event.dx +
			                     event.dy * event.dy)|0) + 'px');
			    }
			  });	

		}


    function zoom(){
    
    scale = 1;  // scale of the image
    xLast = 0;  // last x location on the screen
    yLast = 0;  // last y location on the screen
    xImage = 0; // last x location on the image
    yImage = 0;
    $('#pp_full_res img').mousewheel(function(e) 
    {
        // find current location on screen 
        var xScreen = e.pageX - $(this).offset().left;
        var yScreen = e.pageY - $(this).offset().top;
        // find current location on the image at the current scale
        xImage = xImage + ((xScreen - xLast) / scale);
        yImage = yImage + ((yScreen - yLast) / scale);

        // determine the new scale
        if (e.deltaY > 0)
        {
            scale *= 1.05;
        }
        else
        {
            scale /= 1.05;
        }
        scale = scale < 1 ? 1 : (scale > 5 ? 5 : scale);

        tx = $(this).attr("data-x") || 0;
        ty = $(this).attr("data-y") || 0;

        $(this).css('transform', 'scale(' + scale + ')' + 'translate(' + tx + 'px, ' + ty + 'px)');
        $(this).css('-webkit-transform', 'scale(' + scale + ')' + 'translate(' + tx + 'px, ' + ty + 'px)');
        
        return false;
    });
	}
</script>
	</body>
</html>